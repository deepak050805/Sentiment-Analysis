<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentiment Analysis</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tensorflow/4.10.0/tf.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .main-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .input-section {
            margin-bottom: 30px;
        }

        .input-section label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: #4a5568;
            font-size: 1.1rem;
        }

        .text-input {
            width: 100%;
            min-height: 200px;
            padding: 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .text-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .analyze-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .analyze-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .results-section {
            margin-top: 40px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .results-section.show {
            opacity: 1;
            transform: translateY(0);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .result-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            border-left: 5px solid;
            transition: transform 0.3s ease;
        }

        .result-card:hover {
            transform: translateY(-5px);
        }

        .result-card.positive {
            border-left-color: #10b981;
        }

        .result-card.negative {
            border-left-color: #ef4444;
        }

        .result-card.neutral {
            border-left-color: #6b7280;
        }

        .result-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: #1f2937;
        }

        .result-value {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 5px;
        }

        .confidence-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .confidence-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.8s ease;
        }

        .insights-card {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            padding: 30px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .insights-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .insights-content {
            line-height: 1.6;
            color: #475569;
            font-size: 1.1rem;
        }

        .keywords-section {
            margin-top: 20px;
        }

        .keywords-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #374151;
        }

        .keywords-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .keyword-tag {
            background: #667eea;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .processing-indicator {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f4f6;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .model-info {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .model-info h3 {
            color: #1e40af;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .model-info p {
            color: #1e40af;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .metric-item {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 10px;
        }

        .metric-label {
            font-size: 0.9rem;
            color: #6b7280;
            margin-bottom: 5px;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1f2937;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä Sentiment Analysis</h1>
            <p>Advanced sentiment analysis and content understanding system</p>
        </div>

        <div class="main-card">
            <div class="input-section">
                <label for="textInput">üìù Enter your text or article for analysis:</label>
                <textarea 
                    id="textInput" 
                    class="text-input" 
                    placeholder="Paste your article, review, comment, or any text here... The more text you provide, the more accurate the analysis will be!"
                ></textarea>
            </div>

            <button id="analyzeBtn" class="analyze-btn">
                üîç Analyze Sentiment & Content
            </button>

            <div id="processingIndicator" class="processing-indicator">
                <div class="spinner"></div>
                <p>Analyzing sentiment and extracting insights...</p>
            </div>

            <div id="resultsSection" class="results-section">
                <div class="results-grid">
                    <div id="sentimentCard" class="result-card">
                        <div class="result-title">Overall Sentiment</div>
                        <div id="sentimentValue" class="result-value">-</div>
                        <div id="sentimentConfidence" class="confidence-bar">
                            <div class="confidence-fill"></div>
                        </div>
                    </div>

                    <div id="emotionCard" class="result-card">
                        <div class="result-title">Dominant Emotion</div>
                        <div id="emotionValue" class="result-value">-</div>
                        <div id="emotionConfidence" class="confidence-bar">
                            <div class="confidence-fill"></div>
                        </div>
                    </div>

                    <div id="polarityCard" class="result-card">
                        <div class="result-title">Polarity Score</div>
                        <div id="polarityValue" class="result-value">-</div>
                        <div class="metrics-grid">
                            <div class="metric-item">
                                <div class="metric-label">Positive</div>
                                <div id="positiveScore" class="metric-value">-</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-label">Negative</div>
                                <div id="negativeScore" class="metric-value">-</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="insights-card">
                    <div class="insights-title">
                        üéØ Content Analysis & What This Text Means
                    </div>
                    <div id="insightsContent" class="insights-content">
                        Analysis results will appear here...
                    </div>
                    
                    <div class="keywords-section">
                        <div class="keywords-title">üè∑Ô∏è Key Topics & Themes:</div>
                        <div id="keywordsList" class="keywords-list">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class MLOpsSentimentAnalyzer {
            constructor() {
                this.sentimentLexicon = this.buildSentimentLexicon();
                this.emotionKeywords = this.buildEmotionKeywords();
                this.topicKeywords = this.buildTopicKeywords();
                this.setupEventListeners();
            }

            buildSentimentLexicon() {
                return {
                    positive: {
                        'excellent': 3, 'amazing': 3, 'outstanding': 3, 'fantastic': 3, 'wonderful': 3,
                        'great': 2, 'good': 2, 'nice': 2, 'happy': 2, 'love': 2, 'best': 2, 'awesome': 2,
                        'perfect': 3, 'brilliant': 3, 'superb': 3, 'incredible': 3, 'magnificent': 3,
                        'beautiful': 2, 'helpful': 2, 'useful': 2, 'effective': 2, 'successful': 2,
                        'positive': 2, 'satisfied': 2, 'pleased': 2, 'delighted': 2, 'thrilled': 3,
                        'impressive': 2, 'remarkable': 2, 'exceptional': 3, 'valuable': 2, 'beneficial': 2
                    },
                    negative: {
                        'terrible': -3, 'awful': -3, 'horrible': -3, 'disgusting': -3, 'pathetic': -3,
                        'bad': -2, 'poor': -2, 'hate': -2, 'worst': -3, 'useless': -2, 'disappointing': -2,
                        'failed': -2, 'broken': -2, 'wrong': -2, 'problem': -1, 'issue': -1, 'difficult': -1,
                        'negative': -2, 'frustrated': -2, 'angry': -2, 'annoyed': -2, 'upset': -2,
                        'disaster': -3, 'nightmare': -3, 'catastrophe': -3, 'devastating': -3, 'harmful': -2
                    }
                };
            }

            buildEmotionKeywords() {
                return {
                    joy: ['happy', 'joyful', 'excited', 'thrilled', 'delighted', 'cheerful', 'elated', 'blissful'],
                    anger: ['angry', 'furious', 'mad', 'rage', 'irritated', 'annoyed', 'frustrated', 'outraged'],
                    sadness: ['sad', 'depressed', 'melancholy', 'grief', 'sorrow', 'despair', 'disappointed', 'heartbroken'],
                    fear: ['scared', 'afraid', 'terrified', 'anxious', 'worried', 'nervous', 'panic', 'frightened'],
                    surprise: ['surprised', 'amazed', 'astonished', 'shocked', 'stunned', 'bewildered', 'startled'],
                    disgust: ['disgusted', 'repulsed', 'revolted', 'sickened', 'appalled', 'nauseated']
                };
            }

            buildTopicKeywords() {
                return {
                    technology: ['tech', 'software', 'computer', 'digital', 'app', 'website', 'AI', 'machine learning', 'algorithm'],
                    business: ['company', 'business', 'profit', 'revenue', 'market', 'sales', 'customer', 'service'],
                    politics: ['government', 'policy', 'election', 'political', 'democracy', 'vote', 'president', 'congress'],
                    entertainment: ['movie', 'film', 'music', 'game', 'show', 'actor', 'celebrity', 'entertainment'],
                    health: ['health', 'medical', 'doctor', 'hospital', 'medicine', 'treatment', 'disease', 'wellness'],
                    education: ['school', 'university', 'student', 'teacher', 'education', 'learning', 'study', 'academic'],
                    sports: ['sport', 'team', 'game', 'player', 'match', 'competition', 'championship', 'athletic'],
                    food: ['food', 'restaurant', 'meal', 'cooking', 'recipe', 'taste', 'delicious', 'cuisine']
                };
            }

            setupEventListeners() {
                const analyzeBtn = document.getElementById('analyzeBtn');
                const textInput = document.getElementById('textInput');

                analyzeBtn.addEventListener('click', () => this.analyzeText());
                textInput.addEventListener('keypress', (e) => {
                    if (e.ctrlKey && e.key === 'Enter') {
                        this.analyzeText();
                    }
                });
            }

            async analyzeText() {
                const textInput = document.getElementById('textInput');
                const text = textInput.value.trim();

                if (!text) {
                    alert('Please enter some text to analyze!');
                    return;
                }

                this.showProcessing(true);
                
                // Simulate MLOps pipeline processing time
                await new Promise(resolve => setTimeout(resolve, 1500));

                const analysis = this.performAnalysis(text);
                this.displayResults(analysis);
                this.showProcessing(false);
            }

            showProcessing(show) {
                const indicator = document.getElementById('processingIndicator');
                const resultsSection = document.getElementById('resultsSection');
                
                if (show) {
                    indicator.style.display = 'block';
                    resultsSection.classList.remove('show');
                } else {
                    indicator.style.display = 'none';
                    resultsSection.classList.add('show');
                }
            }

            performAnalysis(text) {
                const words = this.preprocessText(text);
                const sentimentScore = this.calculateSentiment(words);
                const emotions = this.analyzeEmotions(words);
                const topics = this.extractTopics(words);
                const keywords = this.extractKeywords(words);
                const contentMeaning = this.analyzeContentMeaning(text, sentimentScore, topics, emotions);

                return {
                    sentimentScore,
                    emotions,
                    topics,
                    keywords,
                    contentMeaning,
                    wordCount: words.length,
                    originalText: text
                };
            }

            preprocessText(text) {
                return text.toLowerCase()
                    .replace(/[^\w\s]/g, ' ')
                    .split(/\s+/)
                    .filter(word => word.length > 2);
            }

            calculateSentiment(words) {
                let score = 0;
                let positiveCount = 0;
                let negativeCount = 0;

                words.forEach(word => {
                    if (this.sentimentLexicon.positive[word]) {
                        score += this.sentimentLexicon.positive[word];
                        positiveCount++;
                    } else if (this.sentimentLexicon.negative[word]) {
                        score += this.sentimentLexicon.negative[word];
                        negativeCount++;
                    }
                });

                const normalizedScore = Math.max(-1, Math.min(1, score / Math.max(words.length / 10, 1)));
                
                return {
                    score: normalizedScore,
                    label: this.getSentimentLabel(normalizedScore),
                    confidence: Math.abs(normalizedScore),
                    positiveCount,
                    negativeCount,
                    positiveRatio: positiveCount / Math.max(positiveCount + negativeCount, 1),
                    negativeRatio: negativeCount / Math.max(positiveCount + negativeCount, 1)
                };
            }

            getSentimentLabel(score) {
                if (score > 0.1) return 'Positive';
                if (score < -0.1) return 'Negative';
                return 'Neutral';
            }

            analyzeEmotions(words) {
                const emotionScores = {};
                
                Object.keys(this.emotionKeywords).forEach(emotion => {
                    emotionScores[emotion] = 0;
                    this.emotionKeywords[emotion].forEach(keyword => {
                        if (words.includes(keyword)) {
                            emotionScores[emotion]++;
                        }
                    });
                });

                const dominantEmotion = Object.keys(emotionScores).reduce((a, b) => 
                    emotionScores[a] > emotionScores[b] ? a : b
                );

                return {
                    scores: emotionScores,
                    dominant: emotionScores[dominantEmotion] > 0 ? dominantEmotion : 'neutral',
                    confidence: emotionScores[dominantEmotion] / Math.max(words.length / 100, 1)
                };
            }

            extractTopics(words) {
                const topicScores = {};
                
                Object.keys(this.topicKeywords).forEach(topic => {
                    topicScores[topic] = 0;
                    this.topicKeywords[topic].forEach(keyword => {
                        if (words.includes(keyword)) {
                            topicScores[topic]++;
                        }
                    });
                });

                return Object.keys(topicScores)
                    .filter(topic => topicScores[topic] > 0)
                    .sort((a, b) => topicScores[b] - topicScores[a])
                    .slice(0, 3);
            }

            extractKeywords(words) {
                const frequency = {};
                const commonWords = ['the', 'and', 'or', 'but', 'in', 'on', 'at', 'to', 'for', 'of', 'with', 'by', 'is', 'are', 'was', 'were', 'been', 'have', 'has', 'had', 'will', 'would', 'could', 'should', 'may', 'might', 'can', 'this', 'that', 'these', 'those', 'a', 'an'];
                
                words.forEach(word => {
                    if (!commonWords.includes(word) && word.length > 3) {
                        frequency[word] = (frequency[word] || 0) + 1;
                    }
                });

                return Object.keys(frequency)
                    .sort((a, b) => frequency[b] - frequency[a])
                    .slice(0, 8);
            }

            analyzeContentMeaning(text, sentiment, topics, emotions) {
                const textLength = text.split(' ').length;
                const complexity = textLength > 100 ? 'detailed' : textLength > 50 ? 'moderate' : 'brief';
                
                let meaning = `This ${complexity} text `;
                
                // Determine the main purpose
                if (text.toLowerCase().includes('review') || sentiment.label !== 'Neutral') {
                    meaning += `appears to be expressing a ${sentiment.label.toLowerCase()} opinion or review. `;
                } else if (text.includes('?')) {
                    meaning += 'seems to be asking questions or seeking information. ';
                } else if (topics.length > 0) {
                    meaning += `discusses topics related to ${topics.join(', ')}. `;
                } else {
                    meaning += 'contains general commentary or information. ';
                }

                // Add emotional context
                if (emotions.dominant !== 'neutral') {
                    meaning += `The dominant emotional tone is ${emotions.dominant}, `;
                }

                // Add sentiment insights
                if (sentiment.label === 'Positive') {
                    meaning += 'suggesting the author has a favorable view of the subject matter. ';
                } else if (sentiment.label === 'Negative') {
                    meaning += 'indicating concerns, criticism, or dissatisfaction with the topic. ';
                } else {
                    meaning += 'maintaining a balanced or factual perspective. ';
                }

                // Add content type analysis
                if (textLength > 200) {
                    meaning += 'This appears to be a comprehensive piece that thoroughly explores the subject. ';
                } else if (textLength > 50) {
                    meaning += 'This is a concise but informative piece covering the main points. ';
                } else {
                    meaning += 'This is a brief statement or comment. ';
                }

                return meaning;
            }

            displayResults(analysis) {
                // Update sentiment card
                const sentimentCard = document.getElementById('sentimentCard');
                const sentimentValue = document.getElementById('sentimentValue');
                const sentimentConfidence = document.querySelector('#sentimentConfidence .confidence-fill');

                sentimentValue.textContent = analysis.sentimentScore.label;
                sentimentCard.className = `result-card ${analysis.sentimentScore.label.toLowerCase()}`;
                
                const confidencePercent = Math.min(analysis.sentimentScore.confidence * 100, 100);
                sentimentConfidence.style.width = `${confidencePercent}%`;
                
                if (analysis.sentimentScore.label === 'Positive') {
                    sentimentConfidence.style.backgroundColor = '#10b981';
                } else if (analysis.sentimentScore.label === 'Negative') {
                    sentimentConfidence.style.backgroundColor = '#ef4444';
                } else {
                    sentimentConfidence.style.backgroundColor = '#6b7280';
                }

                // Update emotion card
                const emotionValue = document.getElementById('emotionValue');
                const emotionConfidence = document.querySelector('#emotionConfidence .confidence-fill');
                const emotionCard = document.getElementById('emotionCard');

                emotionValue.textContent = analysis.emotions.dominant.charAt(0).toUpperCase() + 
                                         analysis.emotions.dominant.slice(1);
                
                const emotionConfidencePercent = Math.min(analysis.emotions.confidence * 100, 100);
                emotionConfidence.style.width = `${emotionConfidencePercent}%`;
                emotionConfidence.style.backgroundColor = '#8b5cf6';

                // Update polarity card
                const polarityValue = document.getElementById('polarityValue');
                const positiveScore = document.getElementById('positiveScore');
                const negativeScore = document.getElementById('negativeScore');

                polarityValue.textContent = analysis.sentimentScore.score.toFixed(2);
                positiveScore.textContent = `${(analysis.sentimentScore.positiveRatio * 100).toFixed(1)}%`;
                negativeScore.textContent = `${(analysis.sentimentScore.negativeRatio * 100).toFixed(1)}%`;

                // Update insights
                const insightsContent = document.getElementById('insightsContent');
                insightsContent.textContent = analysis.contentMeaning;

                // Update keywords
                const keywordsList = document.getElementById('keywordsList');
                keywordsList.innerHTML = '';
                analysis.keywords.forEach(keyword => {
                    const tag = document.createElement('span');
                    tag.className = 'keyword-tag';
                    tag.textContent = keyword;
                    keywordsList.appendChild(tag);
                });

                if (analysis.topics.length > 0) {
                    analysis.topics.forEach(topic => {
                        const tag = document.createElement('span');
                        tag.className = 'keyword-tag';
                        tag.style.backgroundColor = '#f59e0b';
                        tag.textContent = `#${topic}`;
                        keywordsList.appendChild(tag);
                    });
                }
            }
        }

        // Initialize the MLOps Sentiment Analyzer
        document.addEventListener('DOMContentLoaded', () => {
            new MLOpsSentimentAnalyzer();
        });
    </script>
</body>
</html>